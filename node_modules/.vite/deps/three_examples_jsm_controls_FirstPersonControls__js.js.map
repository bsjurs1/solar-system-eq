{
  "version": 3,
  "sources": ["../../three/examples/jsm/controls/FirstPersonControls.js"],
  "sourcesContent": ["import {\n\tMathUtils,\n\tSpherical,\n\tVector3\n} from '../../../build/three.module.js';\n\nvar FirstPersonControls = function ( object, domElement ) {\n\n\tif ( domElement === undefined ) {\n\n\t\tconsole.warn( 'THREE.FirstPersonControls: The second parameter \"domElement\" is now mandatory.' );\n\t\tdomElement = document;\n\n\t}\n\n\tthis.object = object;\n\tthis.domElement = domElement;\n\n\t// API\n\n\tthis.enabled = true;\n\n\tthis.movementSpeed = 1.0;\n\tthis.lookSpeed = 0.005;\n\n\tthis.lookVertical = true;\n\tthis.autoForward = false;\n\n\tthis.activeLook = true;\n\n\tthis.heightSpeed = false;\n\tthis.heightCoef = 1.0;\n\tthis.heightMin = 0.0;\n\tthis.heightMax = 1.0;\n\n\tthis.constrainVertical = false;\n\tthis.verticalMin = 0;\n\tthis.verticalMax = Math.PI;\n\n\tthis.mouseDragOn = false;\n\n\t// internals\n\n\tthis.autoSpeedFactor = 0.0;\n\n\tthis.mouseX = 0;\n\tthis.mouseY = 0;\n\n\tthis.moveForward = false;\n\tthis.moveBackward = false;\n\tthis.moveLeft = false;\n\tthis.moveRight = false;\n\n\tthis.viewHalfX = 0;\n\tthis.viewHalfY = 0;\n\n\t// private variables\n\n\tvar lat = 0;\n\tvar lon = 0;\n\n\tvar lookDirection = new Vector3();\n\tvar spherical = new Spherical();\n\tvar target = new Vector3();\n\n\t//\n\n\tif ( this.domElement !== document ) {\n\n\t\tthis.domElement.setAttribute( 'tabindex', - 1 );\n\n\t}\n\n\t//\n\n\tthis.handleResize = function () {\n\n\t\tif ( this.domElement === document ) {\n\n\t\t\tthis.viewHalfX = window.innerWidth / 2;\n\t\t\tthis.viewHalfY = window.innerHeight / 2;\n\n\t\t} else {\n\n\t\t\tthis.viewHalfX = this.domElement.offsetWidth / 2;\n\t\t\tthis.viewHalfY = this.domElement.offsetHeight / 2;\n\n\t\t}\n\n\t};\n\n\tthis.onMouseDown = function ( event ) {\n\n\t\tif ( this.domElement !== document ) {\n\n\t\t\tthis.domElement.focus();\n\n\t\t}\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( this.activeLook ) {\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0: this.moveForward = true; break;\n\t\t\t\tcase 2: this.moveBackward = true; break;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.mouseDragOn = true;\n\n\t};\n\n\tthis.onMouseUp = function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif ( this.activeLook ) {\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0: this.moveForward = false; break;\n\t\t\t\tcase 2: this.moveBackward = false; break;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.mouseDragOn = false;\n\n\t};\n\n\tthis.onMouseMove = function ( event ) {\n\n\t\tif ( this.domElement === document ) {\n\n\t\t\tthis.mouseX = event.pageX - this.viewHalfX;\n\t\t\tthis.mouseY = event.pageY - this.viewHalfY;\n\n\t\t} else {\n\n\t\t\tthis.mouseX = event.pageX - this.domElement.offsetLeft - this.viewHalfX;\n\t\t\tthis.mouseY = event.pageY - this.domElement.offsetTop - this.viewHalfY;\n\n\t\t}\n\n\t};\n\n\tthis.onKeyDown = function ( event ) {\n\n\t\t//event.preventDefault();\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase 38: /*up*/\n\t\t\tcase 87: /*W*/ this.moveForward = true; break;\n\n\t\t\tcase 37: /*left*/\n\t\t\tcase 65: /*A*/ this.moveLeft = true; break;\n\n\t\t\tcase 40: /*down*/\n\t\t\tcase 83: /*S*/ this.moveBackward = true; break;\n\n\t\t\tcase 39: /*right*/\n\t\t\tcase 68: /*D*/ this.moveRight = true; break;\n\n\t\t\tcase 82: /*R*/ this.moveUp = true; break;\n\t\t\tcase 70: /*F*/ this.moveDown = true; break;\n\n\t\t}\n\n\t};\n\n\tthis.onKeyUp = function ( event ) {\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase 38: /*up*/\n\t\t\tcase 87: /*W*/ this.moveForward = false; break;\n\n\t\t\tcase 37: /*left*/\n\t\t\tcase 65: /*A*/ this.moveLeft = false; break;\n\n\t\t\tcase 40: /*down*/\n\t\t\tcase 83: /*S*/ this.moveBackward = false; break;\n\n\t\t\tcase 39: /*right*/\n\t\t\tcase 68: /*D*/ this.moveRight = false; break;\n\n\t\t\tcase 82: /*R*/ this.moveUp = false; break;\n\t\t\tcase 70: /*F*/ this.moveDown = false; break;\n\n\t\t}\n\n\t};\n\n\tthis.lookAt = function ( x, y, z ) {\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\ttarget.copy( x );\n\n\t\t} else {\n\n\t\t\ttarget.set( x, y, z );\n\n\t\t}\n\n\t\tthis.object.lookAt( target );\n\n\t\tsetOrientation( this );\n\n\t\treturn this;\n\n\t};\n\n\tthis.update = function () {\n\n\t\tvar targetPosition = new Vector3();\n\n\t\treturn function update( delta ) {\n\n\t\t\tif ( this.enabled === false ) return;\n\n\t\t\tif ( this.heightSpeed ) {\n\n\t\t\t\tvar y = MathUtils.clamp( this.object.position.y, this.heightMin, this.heightMax );\n\t\t\t\tvar heightDelta = y - this.heightMin;\n\n\t\t\t\tthis.autoSpeedFactor = delta * ( heightDelta * this.heightCoef );\n\n\t\t\t} else {\n\n\t\t\t\tthis.autoSpeedFactor = 0.0;\n\n\t\t\t}\n\n\t\t\tvar actualMoveSpeed = delta * this.movementSpeed;\n\n\t\t\tif ( this.moveForward || ( this.autoForward && ! this.moveBackward ) ) this.object.translateZ( - ( actualMoveSpeed + this.autoSpeedFactor ) );\n\t\t\tif ( this.moveBackward ) this.object.translateZ( actualMoveSpeed );\n\n\t\t\tif ( this.moveLeft ) this.object.translateX( - actualMoveSpeed );\n\t\t\tif ( this.moveRight ) this.object.translateX( actualMoveSpeed );\n\n\t\t\tif ( this.moveUp ) this.object.translateY( actualMoveSpeed );\n\t\t\tif ( this.moveDown ) this.object.translateY( - actualMoveSpeed );\n\n\t\t\tvar actualLookSpeed = delta * this.lookSpeed;\n\n\t\t\tif ( ! this.activeLook ) {\n\n\t\t\t\tactualLookSpeed = 0;\n\n\t\t\t}\n\n\t\t\tvar verticalLookRatio = 1;\n\n\t\t\tif ( this.constrainVertical ) {\n\n\t\t\t\tverticalLookRatio = Math.PI / ( this.verticalMax - this.verticalMin );\n\n\t\t\t}\n\n\t\t\tlon -= this.mouseX * actualLookSpeed;\n\t\t\tif ( this.lookVertical ) lat -= this.mouseY * actualLookSpeed * verticalLookRatio;\n\n\t\t\tlat = Math.max( - 85, Math.min( 85, lat ) );\n\n\t\t\tvar phi = MathUtils.degToRad( 90 - lat );\n\t\t\tvar theta = MathUtils.degToRad( lon );\n\n\t\t\tif ( this.constrainVertical ) {\n\n\t\t\t\tphi = MathUtils.mapLinear( phi, 0, Math.PI, this.verticalMin, this.verticalMax );\n\n\t\t\t}\n\n\t\t\tvar position = this.object.position;\n\n\t\t\ttargetPosition.setFromSphericalCoords( 1, phi, theta ).add( position );\n\n\t\t\tthis.object.lookAt( targetPosition );\n\n\t\t};\n\n\t}();\n\n\tfunction contextmenu( event ) {\n\n\t\tevent.preventDefault();\n\n\t}\n\n\tthis.dispose = function () {\n\n\t\tthis.domElement.removeEventListener( 'contextmenu', contextmenu, false );\n\t\tthis.domElement.removeEventListener( 'mousedown', _onMouseDown, false );\n\t\tthis.domElement.removeEventListener( 'mousemove', _onMouseMove, false );\n\t\tthis.domElement.removeEventListener( 'mouseup', _onMouseUp, false );\n\n\t\twindow.removeEventListener( 'keydown', _onKeyDown, false );\n\t\twindow.removeEventListener( 'keyup', _onKeyUp, false );\n\n\t};\n\n\tvar _onMouseMove = bind( this, this.onMouseMove );\n\tvar _onMouseDown = bind( this, this.onMouseDown );\n\tvar _onMouseUp = bind( this, this.onMouseUp );\n\tvar _onKeyDown = bind( this, this.onKeyDown );\n\tvar _onKeyUp = bind( this, this.onKeyUp );\n\n\tthis.domElement.addEventListener( 'contextmenu', contextmenu, false );\n\tthis.domElement.addEventListener( 'mousemove', _onMouseMove, false );\n\tthis.domElement.addEventListener( 'mousedown', _onMouseDown, false );\n\tthis.domElement.addEventListener( 'mouseup', _onMouseUp, false );\n\n\twindow.addEventListener( 'keydown', _onKeyDown, false );\n\twindow.addEventListener( 'keyup', _onKeyUp, false );\n\n\tfunction bind( scope, fn ) {\n\n\t\treturn function () {\n\n\t\t\tfn.apply( scope, arguments );\n\n\t\t};\n\n\t}\n\n\tfunction setOrientation( controls ) {\n\n\t\tvar quaternion = controls.object.quaternion;\n\n\t\tlookDirection.set( 0, 0, - 1 ).applyQuaternion( quaternion );\n\t\tspherical.setFromVector3( lookDirection );\n\n\t\tlat = 90 - MathUtils.radToDeg( spherical.phi );\n\t\tlon = MathUtils.radToDeg( spherical.theta );\n\n\t}\n\n\tthis.handleResize();\n\n\tsetOrientation( this );\n\n};\n\nexport { FirstPersonControls };\n"],
  "mappings": "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",
  "names": []
}
